% is_dibr_do_refinement = false;

pics_dir = 'Guo/';
if is_dibr_do_refinement == false
    depthColorRefinement(pics_dir); % 颜色图和深度图滤波 Color Depth Refinement
end

refined_dir_name = 'DepthColorRefinement/';
color_dir_name = 'Color/';
depth_dir_name = 'Depth/';
prc_dir_name = [pics_dir,refined_dir_name,color_dir_name];
prd_dir_name = [pics_dir,refined_dir_name,depth_dir_name];
pc_dir_name = [pics_dir, color_dir_name];
pd_dir_name = [pics_dir, depth_dir_name];

Zfar = 150;
Znear = 40;

K_0 = [
    1646.35   	 0	926.292
    0.0	1642.41 	540.436
    0.0	0.0	1.0
    ];
K_1 = [
    1647.34   	 0	920.829
    0.0	1646.06 	547.237
    0.0	0.0	1.0
    ];
K_2 = [
    1640.89  	 0	935.244
    0.0	1642.02 	536.109
    0.0	0.0	1.0
    ];
K_3 = [
    1659.98  	 0	949.57
    0.0	1662.23 	525.689
    0.0	0.0	1.0
    ];
K_4 = [
    1646.47  	 0	928.989
    0.0	1648.42 	523.875
    0.0	0.0	1.0
    ];
K_5 = [
    1654.27  	 0	953.723
    0.0	1656.62 	511.519
    0.0	0.0	1.0
    ];
K_6 = [
    1660.63  	 0	963.683
    0.0	1662.52 	515.03
    0.0	0.0	1.0
    ];
K_7 = [
    1664.91  	 0	954.484
    0.0	1667.43 	526.761
    0.0	0.0	1.0
    ];
K_8 = [
    1643.55  	 0	955.731
    0.0	1643.89 	521.996
    0.0	0.0	1.0
    ];
K_9 = [
    1661.46  	 0	976.787
    0.0	1659.4 	518.529
    0.0	0.0	1.0
    ];
K_10 = [
    1654.73 	 0	985.434
    0.0	1650.64 	518.421
    0.0	0.0	1.0
    ];
K_11 = [
    1672.46  	 0	968.303
    0.0	1665.07 	503.736
    0.0	0.0	1.0
    ];


Rt_0 = getCOLMAPRt([-0.669339998142809 -0.08914204463974651 0.22021897409260607 0.7039469200253878 6.146642822508282 13.292338623573723 62.36651817235858]);
Rt_1 = getCOLMAPRt([-0.6776885094074045 -0.06067782725281214 0.1908500049252431 0.7075540693947585 4.806302884630193 13.04566913344321 61.702442422740056]);
Rt_2 = getCOLMAPRt([0.6963456899549031 -0.23902934426139846 0.10417408445755 -0.6686668922495171 -13.923179754607393 14.169786571248892 61.78442164588725]);
Rt_3 = getCOLMAPRt([0.687537229088449 -0.28173002194029617 0.14523837297283246 -0.653319652521721 -14.8042498874964 14.820728608100467 63.33360370079096]);
Rt_4 = getCOLMAPRt([-0.6847154810406942 -0.03328216738683712 0.16841472816024497 0.7083032448718248 2.6717055317594944 13.465634836217237 61.032482510271265]);
Rt_5 = getCOLMAPRt([-0.6912290892304347 -0.003133633315477028 0.1420199249856258 0.7085357206598585 0.35382654426043997 13.839284856949781 61.07566358251572]);
Rt_6 = getCOLMAPRt([-0.697992617246825 0.040363687103092766 0.10000135852958054 0.7079384205738583 -1.085430611708553 13.86411970944876 60.22276871513284]);
Rt_7 = getCOLMAPRt([-0.7006778038814555 0.07398277380468622 0.07390967314833419 0.7057722894412415 -3.8558585739536158 14.348867788699481 60.27878228141171]);
Rt_8 = getCOLMAPRt([0.7032971627415247 -0.10437830768608466 -0.03871103308766418 -0.7021251495863087 -6.143457246116136 14.189199760998207 60.52362098198052]);
Rt_9 = getCOLMAPRt([0.7046423576087707 -0.13909477698636086 0.0019241986171139001 -0.6957931361678913 -7.680747981357773 13.759794693944105 60.93047839296995]);
Rt_10= getCOLMAPRt([0.7031140595452418 -0.17891542739153662 0.04108116625888174 -0.6869732359342131 -9.715786181729984 13.98031129746901 60.473746433633764]);
Rt_11= getCOLMAPRt([0.7004260435558147 -0.2075907831077139 0.0707073001252737 -0.6791979843804519 -12.073309537001519 14.132277885786639 61.29187241185373]);


Ks = {K_0, K_1, K_2, K_3, K_4, K_5, K_6, K_7, K_8, K_9, K_10, K_11};
Rts = {Rt_0, Rt_1, Rt_2, Rt_3, Rt_4, Rt_5, Rt_6, Rt_7, Rt_8, Rt_9, Rt_10, Rt_11};
