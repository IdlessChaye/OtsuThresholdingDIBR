% is_dibr_do_refinement = false;

pics_dir = 'MSR3DVideo-Breakdancers/';
if is_dibr_do_refinement == false
    depthColorRefinement(pics_dir); % 颜色图和深度图滤波 Color Depth Refinement
end

refined_dir_name = 'DepthColorRefinement/';
color_dir_name = 'Color/';
depth_dir_name = 'Depth/';
prc_dir_name = [pics_dir,refined_dir_name,color_dir_name];
prd_dir_name = [pics_dir,refined_dir_name,depth_dir_name];
pc_dir_name = [pics_dir, color_dir_name];
pd_dir_name = [pics_dir, depth_dir_name];

Zfar = 120.0;
Znear = 44.0;

K_0 = [
    1884.190000	-0.654998	513.700000
    0.0	1887.490000	395.609000
    0.0	0.0	1.0
    ];
K_1 = [
    1898.030000	0.282128	517.910000
    0.0	1900.810000	382.815000
    0.0	0.0	1.0
    ];
K_2 = [
    1904.870000	0.437636	497.954000
    0.0	1908.150000	385.047000
    0.0	0.0	1.0
    ];
K_3 = [
    1872.930000	0.680911	546.988000
    0.0	1877.100000	380.224000
    0.0	0.0	1.0
    ];
K_4 = [
    1877.360000	0.415492	579.467000
    0.0	1882.430000	409.612000
    0.0	0.0	1.0
    ];
K_5 = [
    1871.230000	0.747826	540.106000
    0.0	1877.300000	412.656000
    0.0	0.0	1.0
    ];
K_6 = [
    1873.250000	1.073800	578.641000
    0.0	1880.060000	386.506000
    0.0	0.0	1.0
    ];
K_7 = [
    1876.870000	2.040000	580.624000
    0.0	1883.930000	395.399000
    0.0	0.0	1.0
    ];
Rt_0 = [
    0.962107	-0.005824	0.272486	-14.832727
    0.004023	0.999964	0.007166	0.093097
    -0.272519	-0.005795	0.962095	-0.005195
    ];
Rt_1 = [
    0.975810	-0.026010	0.216939	-11.315863
    0.022983	0.999598	0.016432	-0.167907
    -0.217280	-0.011048	0.976016	0.701363
    ];
Rt_2 = [
    0.987000	-0.009204	0.160317	-7.554977
    0.007599	0.999912	0.010582	0.000823
    -0.160400	-0.009226	0.986984	1.245294
    ];
Rt_3 = [
    0.996735	-0.007450	0.080250	-3.841023
    0.006410	0.999888	0.013222	-0.089977
    -0.080339	-0.012665	0.996671	-0.083842
    ];
Rt_4 = [
    1.000000	0.000000	-0.000000	0.000006
    0.000000	1.000000	-0.000000	0.000001
    -0.000000	-0.000000	1.000000	-0.000003
    ];
Rt_5 = [
    0.998897	-0.017983	-0.043130	3.858103
    0.017587	0.999799	-0.009367	0.069365
    0.043289	0.008599	0.999013	0.606667
    ];
Rt_6 = [
    0.991407	-0.015086	-0.129693	7.647271
    0.016454	0.999816	0.009545	-0.012308
    0.129526	-0.011597	0.991473	-0.270987
    ];
Rt_7 = [
    0.982395	0.005137	-0.186558	11.306122
    -0.003610	0.999954	0.008587	-0.146099
    0.186594	-0.007762	0.982368	-1.040691
    ];

Ks = {K_0, K_1, K_2, K_3, K_4, K_5, K_6, K_7};
Rts = {Rt_0, Rt_1, Rt_2, Rt_3, Rt_4, Rt_5, Rt_6, Rt_7};

%LoadBreakdancersData;