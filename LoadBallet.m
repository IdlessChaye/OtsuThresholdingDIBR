% is_dibr_do_refinement = false;

pics_dir = 'MSR3DVideo-Ballet/';
if is_dibr_do_refinement == false
    depthColorRefinement(pics_dir); % 颜色图和深度图滤波 Color Depth Refinement
end

refined_dir_name = 'DepthColorRefinement/';
color_dir_name = 'Color/';
depth_dir_name = 'Depth/';
prc_dir_name = [pics_dir,refined_dir_name,color_dir_name];
prd_dir_name = [pics_dir,refined_dir_name,depth_dir_name];
pc_dir_name = [pics_dir, color_dir_name];
pd_dir_name = [pics_dir, depth_dir_name];

Zfar = 130.0;
Znear = 42.0;

K_0 = [
    1918.270000	2.489820	494.085000
    0.0	1922.580000	447.736000
    0.0	0.0	1.0
    ];
K_1 = [
    1913.690000	-0.143610	533.307000
    0.0	1918.170000	398.171000
    0.0	0.0	1.0
    ];
K_2 = [
    1914.070000	0.343703	564.645000
    0.0	1918.500000	428.422000
    0.0	0.0	1.0
    ];
K_3 = [
    1909.910000	0.571503	545.069000
    0.0	1915.890000	394.306000
    0.0	0.0	1.0
    ];
K_4 = [
    1908.250000	0.335031	560.336000
    0.0	1914.160000	409.596000
    0.0	0.0	1.0
    ];
K_5 = [
    1915.780000	1.210910	527.609000
    0.0	1921.730000	394.455000
    0.0	0.0	1.0
    ];
K_6 = [
    1910.570000	0.786148	578.134000
    0.0	1916.270000	404.469000
    0.0	0.0	1.0
    ];
K_7 = [
    1929.090000	0.831916	585.520000
    0.0	1937.210000	416.944000
    0.0	0.0	1.0
    ];
Rt_0 = [
    0.949462	0.046934	0.310324	-15.094651
    -0.042337	0.998867	-0.021532	0.189829
    -0.310985	0.007308	0.950373	1.383263
    ];
Rt_1 = [
    0.972850	0.010365	0.231187	-11.589320
    -0.012981	0.999864	0.009794	-0.355771
    -0.231056	-0.012528	0.972852	1.045534
    ];
Rt_2 = [
    0.989230	0.003946	0.146295	-7.784865
    -0.004391	0.999983	0.002724	-0.431597
    -0.146283	-0.003337	0.989230	1.392058
    ];
Rt_3 = [
    0.996415	0.026023	0.080480	-3.903715
    -0.026884	0.999591	0.009614	-0.040429
    -0.080197	-0.011743	0.996707	0.168691
    ];
Rt_4 = [
    1.000000	0.000000	0.000000	-0.000002
    0.000000	1.000000	-0.000000	0.000006
    0.000000	-0.000000	1.000000	0.000000
    ];
Rt_5 = [
    0.998175	0.028914	-0.053000	3.849864
    -0.028594	0.999567	0.006786	0.041657
    0.053173	-0.005258	0.998570	0.428967
    ];
Rt_6 = [
    0.988494	0.037674	-0.146458	7.602324
    -0.037105	0.999288	0.006622	-0.045578
    0.146603	-0.001111	0.989188	-0.044837
    ];
Rt_7 = [
    0.975422	0.032363	-0.217910	11.142041
    -0.033721	0.999425	-0.002516	0.200655
    0.217705	0.009803	0.975952	-0.230057
    ];

Ks = {K_0, K_1, K_2, K_3, K_4, K_5, K_6, K_7};
Rts = {Rt_0, Rt_1, Rt_2, Rt_3, Rt_4, Rt_5, Rt_6, Rt_7};

%LoadBalletData;